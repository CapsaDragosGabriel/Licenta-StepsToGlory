using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    Renderer rend;
   
    public PlayerHealth playerHealth;
    public float invulnerabilityTime = 0;
    public float defaultInvulnerability = 3f;

    List<GameObject> bodyParts = new List<GameObject>();

    // Start is called before the first frame update
    

    // Update is called once per frame
    public IEnumerator GetInvulnerable(float duration)
    {
        if (invulnerabilityTime==0)
        {
           
            invulnerabilityTime = duration;
            Physics2D.IgnoreLayerCollision(0, 1, true);
            Physics2D.IgnoreLayerCollision(0, 3, true);

            SpriteRenderer[] bodyParts = GetComponentsInChildren<SpriteRenderer>();
            foreach (SpriteRenderer bodyPart in bodyParts)
            {
                Color c=bodyPart.color;
                c.a = 0.5f;
                bodyPart.color = c;

                //  rend.material.color = c;

            }
           

            yield return new WaitForSeconds(duration);
            invulnerabilityTime = 0;
            Physics2D.IgnoreLayerCollision(0, 1, false);
            Physics2D.IgnoreLayerCollision(0, 3, false);

            foreach (SpriteRenderer bodyPart in bodyParts)
            {
                Color c = bodyPart.color;
                c.a = 1f;
                bodyPart.color = c;

                //  rend.material.color = c;

            }
        }
        
    }
}
